var K=Object.defineProperty,J=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var q=(c,n,r)=>n in c?K(c,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[n]=r,B=(c,n)=>{for(var r in n||(n={}))Z.call(n,r)&&q(c,r,n[r]);if(j)for(var r of j(n))ee.call(n,r)&&q(c,r,n[r]);return c},E=(c,n)=>J(c,X(n));var $=(c,n,r)=>new Promise((g,_)=>{var t=u=>{try{y(r.next(u))}catch(F){_(F)}},w=u=>{try{y(r.throw(u))}catch(F){_(F)}},y=u=>u.done?g(u.value):Promise.resolve(u.value).then(t,w);y((r=r.apply(c,n)).next())});import{r as se,a as T,S as oe,m as te,w as h,U as ie,o as d,b as e,c as m,p as Y,e as a,u as l,h as le,j as f,C as v,F as V,H as S,n as R}from"../chunks/vue-vendor-DAChQ3rz.js";import{_ as ae,b as ne}from"../assets/index-wFKlhvRq.js";import{u as re,C as ce}from"../chunks/ClientReviewLayout-ByHysOP-.js";import{s as U}from"../chunks/card.esm-CiQ1Wq-4.js";import{s as D}from"../chunks/rating.esm-Bmiifht7.js";import{s as de}from"../chunks/textarea.esm-D6i7G5ct.js";import{s as x}from"../chunks/inputtext.esm-DAhs_0Nh.js";import{s as k}from"../chunks/button.esm-tVDeXX10.js";import{s as me}from"../chunks/checkbox.esm-4WzbJXiL.js";import{s as ue}from"../chunks/fileupload.esm-BgVAjcEe.js";import"../chunks/dialog.esm-CYAWXk5o.js";import"../chunks/progressspinner.esm-Hrgp9709.js";import"../chunks/index.esm-Bg6elBM9.js";import"../chunks/message.esm-CdnHGpMk.js";import"../chunks/progressbar.esm-Cqhb3WYw.js";const pe={class:"client-feedback-page"},fe={class:"feedback-header"},ve={class:"feedback-form-section"},be={class:"form-header"},ye={class:"form-section"},he={class:"rating-container"},ke={class:"rating-text"},ge={class:"form-section"},we={class:"detailed-ratings"},_e={class:"aspect-info"},Fe={class:"aspect-label"},Ce={class:"aspect-description"},Re={class:"aspect-rating"},Ve={class:"form-section"},Se={class:"char-counter"},Ue={class:"form-section"},xe={class:"upload-header"},Pe={key:0,class:"upload-files"},Ne={class:"file-info"},je=["src"],qe={key:1,class:"file-icon"},Be={class:"file-details"},Ee={class:"file-name"},$e={class:"file-size"},Te={key:1,class:"upload-empty"},Ye={class:"form-section"},De={class:"contact-fields"},Me={class:"field-group"},Oe={class:"field-group"},ze={class:"field-group"},Ae={class:"contact-preferences"},Ie={class:"preference-item"},Le={class:"form-section"},We={class:"recommendation-options"},He=["onClick"],Ge={class:"option-content"},Qe={class:"option-title"},Ke={class:"option-description"},Je={class:"form-section submit-section"},Xe={class:"submit-actions"},Ze={key:0,class:"success-message"},es={class:"success-content"},ss={key:0},os={class:"success-actions"},ts={__name:"ClientFeedbackView",props:{token:{type:String,required:!0}},setup(c){const n=c,r=ie(),g=ne(),_=re(),t=se({overallRating:0,detailedRatings:{communication:0,quality:0,timeliness:0,professionalism:0,cleanliness:0},comments:"",attachments:[],clientName:"",clientEmail:"",clientPhone:"",requestFollowUp:!1,wouldRecommend:null}),w=T(!1),y=T(!1),u=[{key:"communication",label:"Communication",description:"How well did the team keep you informed?",icon:"pi pi-comments"},{key:"quality",label:"Work Quality",description:"Quality of craftsmanship and materials",icon:"pi pi-star"},{key:"timeliness",label:"Schedule",description:"Did the project stay on schedule?",icon:"pi pi-clock"},{key:"professionalism",label:"Professionalism",description:"Team behavior and work ethic",icon:"pi pi-user-plus"},{key:"cleanliness",label:"Site Cleanliness",description:"How well was the work site maintained?",icon:"pi pi-home"}],F=[{value:"definitely",label:"Definitely Yes",description:"Absolutely would recommend",icon:"pi pi-thumbs-up",class:"positive"},{value:"probably",label:"Probably Yes",description:"Likely would recommend",icon:"pi pi-check",class:"positive"},{value:"maybe",label:"Maybe",description:"Not sure, depends on situation",icon:"pi pi-minus",class:"neutral"},{value:"probably_not",label:"Probably Not",description:"Unlikely to recommend",icon:"pi pi-times",class:"negative"},{value:"definitely_not",label:"Definitely Not",description:"Would not recommend",icon:"pi pi-thumbs-down",class:"negative"}],P=oe(()=>t.overallRating>0&&t.wouldRecommend!==null),M=i=>({1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"})[i]||"Not rated",O=i=>{Object.values(t.detailedRatings).every(s=>s===0)&&Object.keys(t.detailedRatings).forEach(s=>{t.detailedRatings[s]=i.value})},z=i=>{t.attachments=i.files},A=i=>{console.log("Files uploaded:",i.files)},I=i=>{t.attachments=t.attachments.filter(s=>s!==i.file)},L=i=>URL.createObjectURL(i),W=i=>{if(i===0)return"0 B";const s=1024,o=["B","KB","MB","GB"],p=Math.floor(Math.log(i)/Math.log(s));return parseFloat((i/Math.pow(s,p)).toFixed(2))+" "+o[p]},H=()=>$(null,null,function*(){if(!P.value){g.add({severity:"warn",summary:"Incomplete Form",detail:"Please provide an overall rating and recommendation",life:3e3});return}try{w.value=!0;const i=E(B({},t),{token:n.token,submittedAt:new Date().toISOString()});yield _.submitFeedback(i),y.value=!0,setTimeout(()=>{var s;(s=document.querySelector(".success-message"))==null||s.scrollIntoView({behavior:"smooth"})},100),g.add({severity:"success",summary:"Feedback Submitted",detail:"Thank you for your valuable feedback!",life:5e3})}catch(i){console.error("Feedback submission error:",i),g.add({severity:"error",summary:"Submission Failed",detail:i.message||"Failed to submit feedback. Please try again.",life:5e3})}finally{w.value=!1}}),N=()=>{Object.assign(t,{overallRating:0,detailedRatings:{communication:0,quality:0,timeliness:0,professionalism:0,cleanliness:0},comments:"",attachments:[],clientName:"",clientEmail:"",clientPhone:"",requestFollowUp:!1,wouldRecommend:null}),g.add({severity:"info",summary:"Form Cleared",detail:"All fields have been reset",life:2e3})},G=()=>{r.push({name:"client-review",params:{token:n.token}})},Q=()=>{y.value=!1,N(),window.scrollTo({top:0,behavior:"smooth"})};return(i,s)=>(d(),te(ce,null,{default:h(()=>[e("div",pe,[e("div",fe,[a(l(U),{class:"header-card"},{content:h(()=>s[6]||(s[6]=[e("div",{class:"header-content"},[e("div",{class:"header-icon"},[e("i",{class:"pi pi-star"})]),e("div",{class:"header-text"},[e("h1",{class:"feedback-title"},"Share Your Experience"),e("p",{class:"feedback-description"}," Your feedback helps us improve our service and ensures your project meets your expectations. ")])],-1)])),_:1})]),e("div",ve,[a(l(U),{class:"feedback-form-card"},{header:h(()=>{var o;return[e("div",be,[s[7]||(s[7]=e("h2",null,"Project Feedback",-1)),e("p",null,v((o=l(_).currentProject)==null?void 0:o.name),1)])]}),content:h(()=>[e("form",{onSubmit:le(H,["prevent"]),class:"feedback-form"},[e("div",ye,[s[8]||(s[8]=e("h3",{class:"section-title"},[e("i",{class:"pi pi-star"}),f(" Overall Rating ")],-1)),s[9]||(s[9]=e("p",{class:"section-description"}," How would you rate your overall experience with this project? ",-1)),e("div",he,[a(l(D),{modelValue:t.overallRating,"onUpdate:modelValue":s[0]||(s[0]=o=>t.overallRating=o),stars:5,cancel:!1,class:"custom-rating",onChange:O},null,8,["modelValue"]),e("span",ke,v(M(t.overallRating)),1)])]),e("div",ge,[s[10]||(s[10]=e("h3",{class:"section-title"},[e("i",{class:"pi pi-chart-line"}),f(" Detailed Ratings ")],-1)),s[11]||(s[11]=e("p",{class:"section-description"}," Please rate different aspects of your project experience: ",-1)),e("div",we,[(d(),m(V,null,S(u,o=>e("div",{key:o.key,class:"rating-aspect"},[e("div",_e,[e("label",Fe,[e("i",{class:R(o.icon)},null,2),f(" "+v(o.label),1)]),e("small",Ce,v(o.description),1)]),e("div",Re,[a(l(D),{modelValue:t.detailedRatings[o.key],"onUpdate:modelValue":p=>t.detailedRatings[o.key]=p,stars:5,cancel:!1,size:"small"},null,8,["modelValue","onUpdate:modelValue"])])])),64))])]),e("div",Ve,[s[12]||(s[12]=e("h3",{class:"section-title"},[e("i",{class:"pi pi-comment"}),f(" Your Comments ")],-1)),s[13]||(s[13]=e("p",{class:"section-description"}," Tell us more about your experience (optional): ",-1)),a(l(de),{modelValue:t.comments,"onUpdate:modelValue":s[1]||(s[1]=o=>t.comments=o),rows:"6",placeholder:"Share your thoughts about the project, team performance, communication, quality of work, or any suggestions for improvement...",class:"feedback-textarea"},null,8,["modelValue"]),e("small",Se,v(t.comments.length)+"/1000 characters ",1)]),e("div",Ue,[s[16]||(s[16]=e("h3",{class:"section-title"},[e("i",{class:"pi pi-paperclip"}),f(" Attachments (Optional) ")],-1)),s[17]||(s[17]=e("p",{class:"section-description"}," Upload photos or documents related to your feedback: ",-1)),a(l(ue),{mode:"advanced",multiple:!0,accept:"image/*,.pdf,.doc,.docx",maxFileSize:5e6,fileLimit:5,onUpload:A,onRemove:I,onSelect:z,class:"feedback-upload"},{header:h(({chooseCallback:o,clearCallback:p,files:b})=>[e("div",xe,[a(l(k),{onClick:C=>o(),icon:"pi pi-plus",label:"Choose Files",severity:"secondary"},null,8,["onClick"]),a(l(k),{onClick:C=>p(),icon:"pi pi-times",label:"Clear",severity:"secondary",disabled:!b||b.length===0},null,8,["onClick","disabled"])])]),content:h(({files:o,removeFileCallback:p})=>[o.length>0?(d(),m("div",Pe,[(d(!0),m(V,null,S(o,(b,C)=>(d(),m("div",{key:`${b.name}-${C}`,class:"upload-file"},[e("div",Ne,[b.type.startsWith("image/")?(d(),m("img",{key:0,src:L(b),class:"file-preview"},null,8,je)):(d(),m("div",qe,s[14]||(s[14]=[e("i",{class:"pi pi-file"},null,-1)]))),e("div",Be,[e("span",Ee,v(b.name),1),e("small",$e,v(W(b.size)),1)])]),a(l(k),{icon:"pi pi-times",onClick:is=>p(C),size:"small",severity:"danger",text:""},null,8,["onClick"])]))),128))])):(d(),m("div",Te,s[15]||(s[15]=[e("i",{class:"pi pi-cloud-upload"},null,-1),e("p",null,'Drag and drop files here or click "Choose Files"',-1),e("small",null,"Maximum 5 files, 5MB each. Supported: Images, PDF, Word documents",-1)])))]),_:1})]),e("div",Ye,[s[22]||(s[22]=e("h3",{class:"section-title"},[e("i",{class:"pi pi-user"}),f(" Contact Information (Optional) ")],-1)),s[23]||(s[23]=e("p",{class:"section-description"}," Provide your contact details if you'd like a follow-up: ",-1)),e("div",De,[e("div",Me,[s[18]||(s[18]=e("label",{for:"clientName"},"Your Name",-1)),a(l(x),{id:"clientName",modelValue:t.clientName,"onUpdate:modelValue":s[2]||(s[2]=o=>t.clientName=o),placeholder:"Enter your name"},null,8,["modelValue"])]),e("div",Oe,[s[19]||(s[19]=e("label",{for:"clientEmail"},"Email Address",-1)),a(l(x),{id:"clientEmail",modelValue:t.clientEmail,"onUpdate:modelValue":s[3]||(s[3]=o=>t.clientEmail=o),type:"email",placeholder:"your.email@example.com"},null,8,["modelValue"])]),e("div",ze,[s[20]||(s[20]=e("label",{for:"clientPhone"},"Phone Number",-1)),a(l(x),{id:"clientPhone",modelValue:t.clientPhone,"onUpdate:modelValue":s[4]||(s[4]=o=>t.clientPhone=o),placeholder:"(435) 555-0123"},null,8,["modelValue"])])]),e("div",Ae,[e("div",Ie,[a(l(me),{id:"followUp",modelValue:t.requestFollowUp,"onUpdate:modelValue":s[5]||(s[5]=o=>t.requestFollowUp=o),binary:""},null,8,["modelValue"]),s[21]||(s[21]=e("label",{for:"followUp"},"I would like someone to follow up with me about this feedback",-1))])])]),e("div",Le,[s[24]||(s[24]=e("h3",{class:"section-title"},[e("i",{class:"pi pi-heart"}),f(" Recommendation ")],-1)),s[25]||(s[25]=e("p",{class:"section-description"}," Would you recommend Unified Contractors to others? ",-1)),e("div",We,[(d(),m(V,null,S(F,o=>e("div",{key:o.value,class:R(["recommendation-option",{active:t.wouldRecommend===o.value}]),onClick:p=>t.wouldRecommend=o.value},[e("div",{class:R(["option-icon",o.class])},[e("i",{class:R(o.icon)},null,2)],2),e("div",Ge,[e("span",Qe,v(o.label),1),e("small",Ke,v(o.description),1)])],10,He)),64))])]),e("div",Je,[s[26]||(s[26]=e("div",{class:"submit-info"},[e("div",{class:"privacy-notice"},[e("i",{class:"pi pi-shield"}),e("div",null,[e("strong",null,"Privacy Notice:"),f(" Your feedback will be shared with the project team to improve service quality. Contact information is optional and will only be used for follow-up if requested. ")])])],-1)),e("div",Xe,[a(l(k),{type:"submit",label:"Submit Feedback",icon:"pi pi-send",loading:w.value,disabled:!P.value,class:"submit-button"},null,8,["loading","disabled"]),a(l(k),{label:"Clear Form",icon:"pi pi-refresh",severity:"secondary",onClick:N,disabled:w.value},null,8,["disabled"])])])],32)]),_:1})]),y.value?(d(),m("div",Ze,[a(l(U),{class:"success-card"},{content:h(()=>[e("div",es,[s[28]||(s[28]=e("div",{class:"success-icon"},[e("i",{class:"pi pi-check-circle"})],-1)),s[29]||(s[29]=e("h3",null,"Thank You for Your Feedback!",-1)),e("p",null,[s[27]||(s[27]=f(" Your feedback has been submitted successfully. ",-1)),t.requestFollowUp?(d(),m("span",ss,"Someone from our team will contact you soon.")):Y("",!0)]),e("div",os,[a(l(k),{label:"Back to Project",icon:"pi pi-arrow-left",onClick:G}),a(l(k),{label:"Submit Another Review",icon:"pi pi-plus",severity:"secondary",onClick:Q})])])]),_:1})])):Y("",!0)])]),_:1}))}},ws=ae(ts,[["__scopeId","data-v-c2566eea"]]);export{ws as default};
